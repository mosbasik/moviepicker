{% extends  'base.html' %}

{% block content %}

<div class="container">
    <div class="row vertical-divide">
        <div class="col-sm-12">
            <h1>
                <span>{{ group.name }}</span>

                {% if user.is_authenticated %}
                    {% if group in user.movie_groups.all %}
                        <button class="btn btn-danger pull-right leave-group-button" data-group-slug="{{ group.slug }}" data-group-action="leave">Leave Group</button>
                    {% else %}
                        <button class="btn btn-success pull-right join-group-button" data-group-slug="{{ group.slug }}" data-group-action="join">Join Group</button>
                    {% endif %}
                {% else %}
                    <button class="btn btn-success pull-right join-group-button" data-group-slug="{{ group.slug }}" data-group-action="join">Join Group</button>
                {% endif %}
            </h1>
        </div>

    </div>

    <div class="row">
        <div class="col-sm-12">
            <ul class="nav nav-tabs" role="tablist">
                <li class="active" role="upcoming"><a href="#upcoming" aria-controls="#upcoming" role="tab" data-toggle="tab">Upcoming Events</a></li>
                <li role="register"><a href="#register" aria-controls="#register" role="tab" data-toggle="tab">Register Event</a></li>
                <li role="users"><a href="#users" aria-controls="#users" role="tab" data-toggle="tab">Users</a></li>
            </ul>

            <br>

            <div class="tab-content">
                <div role="tabpanel" class="tab-pane active" id="upcoming">
                    {% for event in group.upcoming_events %}
                        {% include "event_panel.html" %}
                    {% endfor %}
                </div>

                <div role="tabpanel" class="tab-pane" id="register">
                    <h2><a href="{% url 'create_event' %}">Register New Event</a></h2>
                    <p>(The form is going to occupy this space soon.)</p>
                </div>

                <div role="tabpanel" class="tab-pane" id="users">
                    <ul>
                        {% for user in users %}
                            <li>{{ user.username }}</li>
                        {% endfor %}
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <hr>

    <div class="row">
        {% include "movie_list.html" %}
    </div>
</div>

{% endblock content %}
